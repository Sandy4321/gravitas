<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exploring probability distributions for bivariate granularities for a non-temporal case  â€¢ gravitas</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Exploring probability distributions for bivariate granularities for a non-temporal case ">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gravitas</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cricket.html">Exploring probability distributions for bivariate granularities for a non-temporal case </a>
    </li>
    <li>
      <a href="../articles/gravitas_vignette.html">Exploring probability distributions for bivariate temporal granularities</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Sayani07/gravitas">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Exploring probability distributions for bivariate granularities for a non-temporal case</h1>
                        <h4 class="author">
<i>Sayani Gupta</i>
<hr>
</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Sayani07/gravitas/blob/master/vignettes/cricket.Rmd"><code>vignettes/cricket.Rmd</code></a></small>
      <div class="hidden name"><code>cricket.Rmd</code></div>

    </div>

    
    
<!-- #Example vignette: 
https://github.com/njtierney/naniar/blob/master/vignettes/getting-started-w-naniar.Rmd -->
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Th application is not only restricted to temporal data. We provide an example of cricket to illustrate how this can be generalised in other applications. The Indian Premier League (IPL) is a professional Twenty20 cricket league in India contested by eight teams representing eight different cities in India. In a Twenty20 game the two teams have a single innings each, which is restricted to a maximum of 20 overs. Hence, in this format of cricket, a match will consist of 2 innings, an innings will consist of 20 overs, an over will consist of 6 balls. We have sourced the the ball by ball data for IPL season 2008 to 2016 from <a href="https://www.kaggle.com/josephgpinto/ipl-data-analysis/data">Kaggle</a>. The dataset contains the information on batting team, bowling team, balls of the over, over of the innings, innings of the match and total runs per ball for 577 matches spanning over 9 seasons (2008 to 2016). It also has information on which team won, dismissal type, batting and bowling teams as other useful information.</p>
<p>A hierarchy like table  can be construed for this game format, where index here would refer to ball as the data set contains ball-by-ball data.</p>
<table class="table">
<caption>A hierarchy table for T20 cricket</caption>
<thead><tr class="header">
<th align="left">units</th>
<th align="right">convert_fct</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">index</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ball</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">over</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">inning</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">match</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>There are many interesting questions that can possibly be answered with such a data set, however, we will explore a few and understand how the proposed approach in the paper can help answer some of the questions.</p>
<p>Mumbai Indians(MI) and Delhi Daredevils (DD) are two teams which played from 2010 to 2015, in which MI always qualified in top 4, and DD never made it to top 4. It would be interesting to see the difference in their strategies throughout all matches in these seasons. The following two questions might help us partially understand their strategies.</p>
<ul>
<li><p>Q1: How their run rates vary depending on if they bat first or 2nd? Is there a chance that they are more likely to win if they bat first?</p></li>
<li><p>Q2: Which team is more consistent in their approach in terms of run rate across different overs of the innings?</p></li>
</ul>
<p>We filter the seasons and batting team and compute the total runs per over and run rate per over from the ball by ball data set <code>cricket</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">cricket_per_over &lt;-<span class="st"> </span>cricket <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(season <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2010</span><span class="op">:</span><span class="dv">2015</span>),</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">         batting_team <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Mumbai Indians"</span>,</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">                             <span class="st">"Delhi Daredevils"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(season,</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">           match_id,</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">           batting_team,</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">           bowling_team,</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">           inning, over) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">runs_per_over =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(total_runs), </a>
<a class="sourceLine" id="cb1-11" data-line-number="11">            <span class="dt">run_rate =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(total_runs)<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(total_runs))</a></code></pre></div>
<p>Although there is no conventional time element in cricket, we can still represent the data set through a <code>tsibble</code>, where each ball, which represents an ordering from past to future, can form the <code>index</code> of the tsibble.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">cricket_tsibble &lt;-<span class="st"> </span>cricket_per_over <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">data_index =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(<span class="dt">index =</span> data_index)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">cricket_tsibble <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(batting_team <span class="op">==</span><span class="st"> "Mumbai Indians"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="../reference/prob_plot.html">prob_plot</a></span>(<span class="st">"inning"</span>, <span class="st">"over"</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">             hierarchy_model,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">             <span class="dt">response =</span> <span class="st">"run_rate"</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">             <span class="dt">plot_type =</span> <span class="st">"lv"</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; Warning in gran_warn(.data, gran1, gran2, hierarchy_tbl = hierarchy_tbl, : Some combinations of granularities have less than 30 observations.</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;             Check gran_obs() to find combinations which have low observations.</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;             Analyze the distribution of these combinations with caution.</span></a></code></pre></div>
<p><img src="cricket_files/figure-html/unnamed-chunk-3-1.png" width="768" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">cricket_tsibble <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(batting_team <span class="op">==</span><span class="st"> "Delhi Daredevils"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">    </span><span class="kw"><a href="../reference/prob_plot.html">prob_plot</a></span>(<span class="st">"inning"</span>, <span class="st">"over"</span>,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">             hierarchy_model,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">             <span class="dt">response =</span> <span class="st">"run_rate"</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">             <span class="dt">plot_type =</span> <span class="st">"lv"</span>)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; Warning in gran_warn(.data, gran1, gran2, hierarchy_tbl = hierarchy_tbl, : Some combinations of granularities have less than 30 observations.</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;             Check gran_obs() to find combinations which have low observations.</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;             Analyze the distribution of these combinations with caution.</span></a></code></pre></div>
<p><img src="cricket_files/figure-html/unnamed-chunk-3-2.png" width="768" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">cricket_dot_wckt &lt;-<span class="st"> </span>cricket <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">wicket =</span> <span class="kw">if_else</span>(<span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(dismissal_kind),<span class="dv">0</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">         <span class="dt">dot_balls =</span> <span class="kw">if_else</span>(total_runs<span class="op">==</span><span class="dv">0</span>,<span class="dv">1</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">         ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(season, match_id, batting_team, bowling_team,  inning, over) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">wicket =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(wicket),</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">            <span class="dt">dot_balls =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(dot_balls)) </a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">cricket_tsibble_dot &lt;-<span class="st"> </span>cricket_tsibble <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="st">  </span><span class="kw">left_join</span>(cricket_dot_wckt,</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">                              <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"season"</span>, </a>
<a class="sourceLine" id="cb5-12" data-line-number="12">                                     <span class="st">"match_id"</span>,</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">                                     <span class="st">"batting_team"</span>,</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">                                     <span class="st">"bowling_team"</span>,</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">                                     <span class="st">"inning"</span>,</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">                                     <span class="st">"over"</span>))</a>
<a class="sourceLine" id="cb5-17" data-line-number="17"></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"></a>
<a class="sourceLine" id="cb5-19" data-line-number="19">cricket_tsibble_dot  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(dot_balls <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="st">  </span><span class="kw"><a href="../reference/prob_plot.html">prob_plot</a></span>(<span class="st">"dot_balls"</span>,</a>
<a class="sourceLine" id="cb5-22" data-line-number="22">            <span class="st">"over"</span>,</a>
<a class="sourceLine" id="cb5-23" data-line-number="23">            hierarchy_model,</a>
<a class="sourceLine" id="cb5-24" data-line-number="24">            <span class="dt">response =</span> <span class="st">"runs_per_over"</span>,</a>
<a class="sourceLine" id="cb5-25" data-line-number="25">            <span class="dt">plot_type =</span> <span class="st">"quantile"</span>,</a>
<a class="sourceLine" id="cb5-26" data-line-number="26">            <span class="dt">quantile_prob =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.1</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.9</span>))</a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; Warning in gran_warn(.data, gran1, gran2, hierarchy_tbl = hierarchy_tbl, : Some combinations of granularities have less than 30 observations.</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt;             Check gran_obs() to find combinations which have low observations.</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt;             Analyze the distribution of these combinations with caution.</span></a></code></pre></div>
<p><img src="cricket_files/figure-html/unnamed-chunk-4-1.png" width="768" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sayani Gupta, Rob Hyndman, Di Cook.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
