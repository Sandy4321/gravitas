knitr::opts_chunk$set(
echo = TRUE,
collapse = TRUE,
comment = "#>",
fig.height = 5,
fig.width = 8,
fig.align = "center",
cache = FALSE
)
library(gravitas)
library(dplyr)
library(ggplot2)
library(tsibble)
library(lvplot)
library(ggplot2)
smart_meter10 %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5)
smart_meter10 %>%
create_gran("day_fortnight") %>%
group_by(day_fortnight)
smart_meter10 %>%
create_gran("week_month") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("week_month") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5)
<hr>
## Interaction
library(lvplot)
library(ggplot2)
smart_meter10 %>%
create_gran("week_month") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("week_month") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5)
library(lvplot)
library(ggplot2)
smart_meter10 %>%
create_gran("week_month") %>%
ggplot2::ggplot(aes(
x = as.factor(week_month),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("week_month") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5)
smart_meter10 %>%
create_gran("day_fortnight") %>%
group_by(day_fortnight)
smart_meter10
smart_meter10 %>% distinct(customer_id)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
library(lvplot)
library(ggplot2)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
smart_meter10 %>%
create_gran("day_fortnight") %>%
group_by(day_fortnight)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
library(lvplot)
library(ggplot2)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
smart_meter10 %>%
create_gran("day_fortnight") %>%
group_by(day_fortnight)
library(lvplot)
library(ggplot2)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh
)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
library(lvplot)
library(ggplot2)
library(dplyr)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh))
??spread
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>% spread(day_fortnight, general_supply_kwh)
library(tidyr)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>% spread(day_fortnight, general_supply_kwh)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>% spread(day_fortnight, median_demand)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>% spread(customer_id, median_demand)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>% ggplot(aes(x=day_fortnight, y =median_demand, color = customer_id)) + geom_line()
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>% ggplot(aes(x=day_fortnight, y =median_demand, color = customer_id, group = customer_id)) + geom_line()
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>%
ggplot(aes(x=day_fortnight, y =median_demand,
color = customer_id, group = customer_id)) +
geom_line()
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
as_tibble() %>%
group_by(customer_id, day_fortnight) %>%
summarise(median_demand = median(general_supply_kwh)) %>%
ggplot(aes(x=day_fortnight, y =median_demand,
color = customer_id, group = customer_id)) +
geom_line()
smart_meter10 %>% distinct(customer_id)
smart_p <- smart_meter10 %>%
ggplot() +
geom_line(aes(x =reading_datetime,
y = general_supply_kwh,
color = customer_id))  +
theme(legend.position = "None")
smart_anim <-  smart_p + gganimate::transition_states(customer_id)+ labs(title = "{closest_state}")
gganimate::animate(smart_anim, fps = 10, width = 1000, height = 600)
# smart_p <- smart_meter10 %>%
#            ggplot() +
#            geom_line(aes(x =reading_datetime,
#                          y = general_supply_kwh,
#                          color = customer_id))  +
#   theme(legend.position = "None")
#
# smart_anim <-  smart_p + gganimate::transition_states(customer_id)+ labs(title = "{closest_state}")
#
# gganimate::animate(smart_anim, fps = 10, width = 1000, height = 600)
#
#
# anim_save("images/smart_allcust.gif")
knitr::include_graphics("man/figures/smart_allcust.gif")
devtools::build_vignettes()
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
scale_y_sqrt() +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) + facet_wrap(~customer_id)
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id)
?geom_lv
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
#aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id) +
scale_fill_lv() +
theme_bw()
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id) +
scale_fill_lv() +
theme_bw()
?scale_fill_lv
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id) +
#scale_fill_lv() +
theme_bw() +
scale_y_sqrt()
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id) +
scale_fill_lv() +
theme_bw() +
scale_y_sqrt()
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
#aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id) +
scale_fill_lv() +
theme_bw() +
scale_y_sqrt()
library(lvplot)
library(ggplot2)
library(dplyr)
library(tibble)
smart_meter10 %>%
filter(customer_id %in% c(10006704, 10017936)) %>%
create_gran("day_fortnight") %>%
ggplot2::ggplot(aes(
x = as.factor(day_fortnight),
y = general_supply_kwh)) +
xlab("day_fortnight") +
geom_lv(
outlier.colour = "red",
aes(fill = ..LV..),
k = 5) +
facet_wrap(~customer_id) +
scale_fill_lv() +
theme_bw() +
scale_y_sqrt()
smart_meter10 %>% harmony(
ugran = "month"
)
smart_meter10 %>% harmony(
ugran = "month"
)
smart_meter10 %>% harmony(
ugran = "month"
)
smart_meter10 %>% harmony(
ugran = "month",
filter_out = c("hhour")
)
smart_meter10 %>% harmony(
ugran = "month",
filter_out = c("hhour")
)
smart_meter10 %>% harmony(
ugran = "month",
filter_out = c("hhour", "fortnight")
)
smart_meter10 %>% search_gran(ugran = "month",
filter_out = c("hhour", "fortnight")
)
smart_meter10 %>% gran_advice(
"week_month",
"wknd_wday"
)
smart_meter10 %>% gran_advice(
"week_month",
"wknd_wday"
)
smart_meter10 %>% gran_advice(
"week_month",
"wknd_wday"
) %>% print
smart_meter10 %>% prob_plot("wknd_wday",
"hour_day",
response = "general_supply_kwh",
plot_type = "lv"
) + scale_y_sqrt()
smart_meter10 %>%
filter(customer_id %in% c(10017936)) %>%
prob_plot("wknd_wday",
"hour_day",
response = "general_supply_kwh",
plot_type = "lv") +
scale_y_sqrt()
smart_meter10 %>%
filter(customer_id %in% c(10017936))%>%
prob_plot("wknd_wday",
"hour_day",
response = "general_supply_kwh",
plot_type = "lv") +
scale_y_sqrt()
smart_meter10 %>%
filter(customer_id %in% c(10006704)) %>%
prob_plot("wknd_wday",
"hour_day",
response = "general_supply_kwh",
plot_type = "lv") +
scale_y_sqrt()
smart_meter10 %>% gran_advice(
"week_month",
"hour_day"
)
cust1 <- smart_meter10 %>%
filter(customer_id %in% c(10006704)) %>%
prob_plot("wknd_wday",
"hour_day",
response = "general_supply_kwh",
plot_type = "boxplot") +
scale_y_sqrt()
cust2 <- smart_meter10 %>%
filter(customer_id %in% c(10017936))%>%
prob_plot("wknd_wday",
"hour_day",
response = "general_supply_kwh",
plot_type = "boxplot") +
scale_y_sqrt()
cust1
cust2
cust1
cust2
devtools::build_vignettes()
pkgdown::build_site()
